{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
<meta name="description" content="POS - Bootstrap Admin Template">
<meta name="keywords" content="admin, estimates, bootstrap, business, corporate, creative, invoice, html5, responsive, Projects">
<meta name="author" content="Dreamguys - Bootstrap Admin Template">
<meta name="robots" content="noindex, nofollow">
<title>Forus Health</title>

<link rel="shortcut icon" type="image/x-icon" href="{% static 'images/logo.png' %}">

<link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">

<link rel="stylesheet" href="{% static 'assets/css/animate.css' %}">

<link rel="stylesheet" href="{% static 'assets/plugins/select2/css/select2.min.css' %}">

<link rel="stylesheet" href="{% static 'assets/css/dataTables.bootstrap4.min.css' %}">

<link rel="stylesheet" href="{% static 'assets/plugins/fontawesome/css/fontawesome.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/plugins/fontawesome/css/all.min.css' %}">

<link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
</head>
<body>
  <style type="text/css">
      div.scrollmenu {
  background-color: white;
  overflow: auto;
  white-space: nowrap;
}

div.scrollmenu a {
  display: inline-block;
  color: white;
  text-align: center;
  padding: 14px;
  text-decoration: none;
}


  </style>

<div id="global-loader">
<div class="whirly-loader" > </div>
</div>

<div class="main-wrapper">


<div class="header">

<div >
<a href="viewdata" class="logo">
<img src="{% static 'images/forus-health.svg' %}" alt="" style="margin-left:40px; ">
</a>

</div>

<ul class="nav user-menu">

<li class="nav-item">
    
<div class="top-nav-search">
<a href="javascript:void(0);" class="responsive-search">
<i class="fa fa-search"></i>
</a>
    <a href="index1" class="btn btn-cancel" style="margin-left: 920px; margin-top:-114px;">Back</a>
</div>
</li>





<li class="nav-item dropdown has-arrow main-drop">


</div>
</li>
</ul>


<div class="dropdown mobile-user-menu">


</div>

</div>


<div class="sidebar" id="sidebar">
<div class="sidebar-inner slimscroll">
<div id="sidebar-menu" class="sidebar-menu">

<ul>


<li class="submenu">
<a href="javascript:void(0);"><img src="{% static 'assets/img/icons/users1.svg' %}"alt="img"><span> Edit Stock</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="viewdata">Edit Stock list </a></li>
<li><a href="recstock">Edit Received list </a></li>
<li><a href="Issued">Edit Issued list </a></li>
</ul>
<style>
  
  .circle1 {
      width: 100px;
      height: 100px;
      background: rgba(49, 193, 227,1 );
      color: white;
      border: 2px solid #000;
      border-radius: 50%;
      margin-top: 70px;
      margin-left: 40px;
    }
 </style>
 <div class="circle1" style="text-align: center; " ><b><h2 style="margin-top: 25px;">{{ab}}</h2></b></div>
<h3>Total Stock Balance</h3>
</li>


<!-- <li class="submenu">
    <a href="javascript:void(0);"><img src="{% static 'assets/img/icons/users1.svg' %}"alt="img"><span> Stock Edit</span> <span class="menu-arrow"></span></a>
    <ul>
    <li><a href="edit">Edit Bin  </a></li>
    </ul>
    </li> -->

</ul>
</div>
</div>
</div>

<div class="page-wrapper"  id="content">
<div class="content">
<div class="page-header">
<div class="page-title">

   
    
  
 
<h4>Stock Edit </h4>
<h6>Edit Stock Information: </h6>

<style>
      * { font-family: calibri; font-size: 20px; }
        
      table
      {
        width: 300px;
      }
      table, th, td 
      {
        border: solid 1px #DDD;
        border-collapse: collapse;
        padding: 2px 3px;
        text-align: center;
      }
    </style>


<script>
    function createPDF() {
        var sTable = document.getElementById('tab').innerHTML;
    
        var style = "<style>";
        style = style + "table {width: 100%;font: 17px Calibri;}";
        style = style + "table, th, td {border: solid 1px #DDD; border-collapse: collapse;";
        style = style + "padding: 2px 3px;text-align: center;}";
        style = style + "</style>";

        window.document.open();
        
        window.document.write('<html><head>');
        window.document.write('<h2><center><b>Stock List Report</b></center></h2>');   // <title> FOR PDF HEADER.
        window.document.write(style);          // ADD STYLE INSIDE THE HEAD TAG.
        window.document.write('</head>');
        window.document.write('<body>');
        window.document.write(sTable);         // THE TABLE CONTENTS INSIDE THE BODY TAG.
        window.document.write('</body> </html>');
        
        window.document.close();  

        window.print();
//          window.focus();
//             setTimeout( function () {
//                 window.print();
//                 window.location.href = "viewdata";
//             }, 100);  
        
// }
        window.document.location.href = "viewdata";
        
    }
  
        function downloadCSV(csv, filename) {
    var csvFile;
    var downloadLink;

    // CSV file
    csvFile = new Blob([csv], {type: "text/csv"});

    // Download link
    downloadLink = document.createElement("a");

    // File name
    downloadLink.download = filename;

    // Create a link to the file
    downloadLink.href = window.URL.createObjectURL(csvFile);

    // Hide download link
    downloadLink.style.display = "none";

    // Add the link to DOM
    document.body.appendChild(downloadLink);

    // Click download link
    downloadLink.click();
}
function exportTableToCSV(filename) {
    var csv = [];
    var rows = document.querySelectorAll("table tr");
    
    for (var i = 0; i < rows.length; i++) {
        var row = [], cols = rows[i].querySelectorAll("td, th");
        
        for (var j = 0; j < cols.length; j++) 
            row.push(cols[j].innerText);

        csv.push(row.join(","));        
    }

    // Download CSV file
    downloadCSV(csv.join("\n"), filename);
}

// function exportToCSV() {
//     var csv = [];
//     var rows = document.querySelectorAll("table tr");

//     rows.forEach(function(row) {
//         var rowData = [];
//         row.querySelectorAll("td,th").forEach(function(cell) {
//             rowData.push(cell.innerText);
//         });
//         csv.push(rowData.join(","));
//     });

//     var csvContent = "data:text/csv;charset=utf-8," + csv.join("\n");
//     var encodedUri = encodeURI(csvContent);
//     var link = document.createElement("a");
//     link.setAttribute("href", encodedUri);
//     link.setAttribute("download", "table_data.csv");
//     document.body.appendChild(link);
//     link.click();
// }


</script>

</div>
</div>

<div class="card" >
<div class="card-body">
 

<div class="row">
<div class="scrollmenu">
  <p style="margin-top:5px">
    <a data-bs-toggle="tooltip" title="pdf" ><img src="{% static 'assets/img/icons/pdf.svg' %}" alt="img" style="height: 40px; " type="button" value="Download PDF" 
           id="btPrint" onclick="createPDF()"></a>

    <a data-bs-toggle="tooltip" title="Excel" ><img src="{% static 'assets/img/icons/Excel.svg' %}" alt="img" style="height: 40px; " type="button" value="Download Excel" 
            onclick="exportTableToCSV('Stock_Raw_Materials.csv')">
           </a> 

<!-- <button style="background-color:rgba(49, 193, 227,1 );  margin-left:20px;margin-top: -50px;"  onclick="exportToCSV()"><h4 style="font-family: sans-serif;color: white; ">Export Stock Data</h4></button> -->
</p>
 
<!-- <a data-bs-toggle="tooltip" title="Excel" ><img src="{% static 'assets/img/icons/Excel.svg' %}" alt="img" style="height: 35px; margin-top: -10px;" type="button" value="Download Excel" id="btPrint" onclick="tableToCSV('Stock Details list')" ></a>  </p>  -->
  
    <div id="tab">
    
<table class="table  datanew " >
<thead>
<tr>
<th>ID</th>  
<th>Material Part No</th>
<th>Description </th>
<th>Current Stock Balance</th>
<th>Store Room Number</th>
<th>Devices</th>
<th>Rack Number</th>
<th>Shelf</th>
<th>Bin </th>
<th>Items</th>
<th>Date</th>
<th>Previous Balance</th>
<th>Nos. Received</th>
<th>Nos. Issued</th>
<th>Reference Document Number</th>
<th>Remarks</th>
<th>ERP Part No </th>
<th>Edit/Update</th>
<!-- <th>Edit/Update</th> -->

</tr>
</thead>
<tbody>
<tr>
    {% for i in dis %}
<td>{{ i.id }}</td>
<td>{{ i.MP_NO }}</td>
<td>{{ i.desc }}</td>
<td>{{ i.sb }}</td>
<td>{{ i.str }}</td>
<td>{{ i.devr1 }}</td>
<td>{{ i.rkr }}</td>
<td>{{ i.shelf }}</td>
<td>{{ i.bin_card }}</td>
<td>{{ i.item }}</td>
<td>{{ i.date }}</td>
<td>{{ i.pb }}</td>
<td >{{ i.no_received }}</td>
<td>{{ i.no_issue }}</td>
<td>{{ i.rdno }}</td>
<td>{{ i.remarks }}</td>
<td>{{ i.ERP_NO }}</td>
<td><a href="editdata{{i.id}}" style="text-decoration:none;background-color:skyblue; color: white;width: 90px;border-style: solid;border-color: black ;"><b>Edit</b></a></td>

 </td>
 
<!-- <td><a href="edelete{{i.id}}" style="text-decoration:none;background-color:skyblue; color: white;width: 90px;border-style: solid;border-color: black ;"><b>Delete</b></a></td>
</td> -->
</tr> 

{% endfor %}


</tbody>
</table>


</div>

<!-- <br>
<div id="editor"></div>
  <button id="cmd" style="margin-right: 50px;">Generate PDF</button> -->
</div>
</div>
</div>
</div>

</div>
</div>
</div>
</div>
</div>
</div>
</div>

</div>
</div>
</div>


  <!-- <script>
    var doc = new jsPDF();  
var specialElementHandlers = {
  "#editor": function (element, renderer) {
    
    return true;
  }
};

$("#cmd").click(function () {
  doc.fromHTML($("#content").html(), 15, 15, {
    width: 175,
    elementHandlers: specialElementHandlers
  });
  doc.save("sample-file.pdf");
});</script> -->

<script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/0.9.0rc1/jspdf.min.js"></script>
<script src="{% static 'assets/js/jquery-3.6.0.min.js' %}"></script>

<script src="{% static 'assets/js/feather.min.js' %}"></script>

<script src="{% static 'assets/js/jquery.slimscroll.min.js' %}"></script>

<script src="{% static 'assets/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'assets/js/dataTables.bootstrap4.min.js' %}"></script>

<script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>

<script src="{% static 'assets/plugins/select2/js/select2.min.js' %}"></script>

<script src="{% static 'assets/plugins/sweetalert/sweetalert2.all.min.js' %}"></script>
<script src="{% static 'assets/plugins/sweetalert/sweetalerts.min.js' %}"></script>

<script src="{% static 'assets/js/script.js' %}"></script>
</body>
</html>



  <!--Add External Libraries - JQuery and jspdf 
  check out url - https://scotch.io/@nagasaiaytha/generate-pdf-from-html-using-jquery-and-jspdf
  -->
